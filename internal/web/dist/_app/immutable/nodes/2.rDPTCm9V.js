import{c as b,a as t,p as pe,f as u,t as S,s as Z}from"../chunks/DFhzKIwN.js";import{p as pt,f as a,n as jt,a as ht,k as mt,g as o,K as Y,G as N,I as j,t as tt,P as he,V as ge,ar as ae,J as d,W as p,Q as Pt,X as xe}from"../chunks/C9Or7OaE.js";import{s as kt,r as wt,p as $t,i as _t,c as r}from"../chunks/8ZJiUQMh.js";import{I as Vt,s as bt,f as Pe,g as ye,h as be,b as At,a as we,m as Ce,q as Ie,c as Se,B as Te,l as Et,n as Ft,j as Ae,k as se}from"../chunks/BzMl8pwZ.js";import{C as ut,a as ct}from"../chunks/D73sW1Zq.js";import{C as ft,a as yt,b as oe}from"../chunks/ClfVuNQR.js";import{T as je,a as ke,b as le,c as Ot,d as Ne,e as Ut,f as Me,g as Be,h as De}from"../chunks/CTLUW-Fh.js";import{B as Le}from"../chunks/m9-iLbLU.js";import{S as Qt}from"../chunks/DiPVPWZ8.js";import{C as Re}from"../chunks/BiFI3i4V.js";function Ee(C,e){pt(e,!0);let T=wt(e,["$$slots","$$events","$$legacy"]);const f=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];Vt(C,kt({name:"activity"},()=>T,{get iconNode(){return f},children:(I,D)=>{var P=b(),w=a(P);bt(w,()=>e.children??jt),t(I,P)},$$slots:{default:!0}})),ht()}function ne(C,e){pt(e,!0);let T=wt(e,["$$slots","$$events","$$legacy"]);const f=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"}],["path",{d:"m3.3 7 8.7 5 8.7-5"}],["path",{d:"M12 22V12"}]];Vt(C,kt({name:"box"},()=>T,{get iconNode(){return f},children:(I,D)=>{var P=b(),w=a(P);bt(w,()=>e.children??jt),t(I,P)},$$slots:{default:!0}})),ht()}function Fe(C,e){pt(e,!0);let T=wt(e,["$$slots","$$events","$$legacy"]);const f=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];Vt(C,kt({name:"circle-x"},()=>T,{get iconNode(){return f},children:(I,D)=>{var P=b(),w=a(P);bt(w,()=>e.children??jt),t(I,P)},$$slots:{default:!0}})),ht()}function Oe(C,e){pt(e,!0);let T=wt(e,["$$slots","$$events","$$legacy"]);const f=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];Vt(C,kt({name:"clock"},()=>T,{get iconNode(){return f},children:(I,D)=>{var P=b(),w=a(P);bt(w,()=>e.children??jt),t(I,P)},$$slots:{default:!0}})),ht()}const Ue=ye({component:"progress",parts:["root"]});class Zt{static create(e){return new Zt(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=Pe(this.opts.ref)}#t=mt(()=>({role:"progressbar",value:this.opts.value.current,"aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":this.opts.value.current===null?void 0:this.opts.value.current,"data-value":this.opts.value.current===null?void 0:this.opts.value.current,"data-state":Ve(this.opts.value.current,this.opts.max.current),"data-max":this.opts.max.current,"data-min":this.opts.min.current,"data-indeterminate":this.opts.value.current===null?"":void 0,[Ue.root]:"",...this.attachment}));get props(){return o(this.#t)}set props(e){Y(this.#t,e)}}function Ve(C,e){return C===null?"indeterminate":C===e?"loaded":"loading"}var We=u("<div><!></div>");function Xe(C,e){const T=pe();pt(e,!0);let f=$t(e,"value",3,0),I=$t(e,"max",3,100),D=$t(e,"min",3,0),P=$t(e,"id",19,()=>be(T)),w=$t(e,"ref",15,null),F=wt(e,["$$slots","$$events","$$legacy","child","children","value","max","min","id","ref"]);const nt=Zt.create({value:At(()=>f()),max:At(()=>I()),min:At(()=>D()),id:At(()=>P()),ref:At(()=>w(),L=>w(L))}),X=mt(()=>Ce(F,nt.props));var Ct=b(),et=a(Ct);{var Wt=L=>{var q=b(),gt=a(q);bt(gt,()=>e.child,()=>({props:o(X)})),t(L,q)},It=L=>{var q=We();we(q,()=>({...o(X)}));var gt=N(q);bt(gt,()=>e.children??jt),j(q),t(L,q)};_t(et,L=>{e.child?L(Wt):L(It,!1)})}t(C,Ct),ht()}var qe=u('<div data-slot="progress-indicator" class="bg-primary h-full w-full flex-1 transition-all"></div>');function ze(C,e){pt(e,!0);let T=$t(e,"ref",15,null),f=$t(e,"max",3,100),I=wt(e,["$$slots","$$events","$$legacy","ref","class","max","value"]);var D=b(),P=a(D);{let w=mt(()=>Se("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e.class));r(P,()=>Xe,(F,nt)=>{nt(F,kt({"data-slot":"progress",get class(){return o(w)},get value(){return e.value},get max(){return f()}},()=>I,{get ref(){return T()},set ref(X){T(X)},children:(X,Ct)=>{var et=qe();tt(()=>Ie(et,`transform: translateX(-${100-100*(e.value??0)/(f()??1)}%)`)),t(X,et)},$$slots:{default:!0}}))})}t(C,D),ht()}var Ge=u('<span class="text-sm text-muted-foreground">Auto-refresh paused</span>'),He=u("<!> Refresh",1),Je=u("<!> <!>",1),Ke=u("<!> <!>",1),Qe=u('<div class="text-2xl font-bold"> </div> <p class="text-xs text-muted-foreground">All sessions created</p>',1),Ze=u("<!> <!>",1),Ye=u("<!> <!>",1),tr=u('<div class="text-2xl font-bold text-green-600"> </div> <p class="text-xs text-muted-foreground">Currently running</p>',1),er=u("<!> <!>",1),rr=u("<!> <!>",1),ar=u('<div class="text-2xl font-bold text-yellow-600"> </div> <p class="text-xs text-muted-foreground">Past TTL</p>',1),sr=u("<!> <!>",1),or=u("<!> <!>",1),lr=u('<div class="text-2xl font-bold"> </div> <p class="text-xs text-muted-foreground">Daemon running</p>',1),nr=u("<!> <!>",1),dr=u("<!> <!> <!> <!>",1),ir=u("<!> <!>",1),vr=u('<div class="space-y-2"><div class="flex items-center justify-between text-sm"><span class="font-medium"> </span> <span class="text-muted-foreground"> </span></div> <!></div>'),ur=u("<!> <!>",1),cr=u("<!> <!>",1),fr=u('<div class="space-y-2"></div>'),_r=u("<!> <!> <!> <!>",1),$r=u("<!> <!> <!> <!>",1),mr=u("<!> <!>",1),pr=u('<div class="flex flex-col items-center justify-center py-8 text-center"><!> <p class="text-sm text-muted-foreground">No sessions yet</p></div>'),hr=u("<!> <!>",1),gr=u('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold tracking-tight">Overview</h1> <p class="text-muted-foreground">Monitor your sandbox runtime environment</p></div> <div class="flex items-center gap-2"><!> <!></div></div> <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4"><!></div> <!> <!></div>');function jr(C,e){pt(e,!0);const T=5;let f=Pt(null),I=Pt(!0),D=Pt(null),P=Pt(0),w=Pt(!1),F,nt=Pt(0),X;function Ct(){F&&(clearInterval(F),F=0),Y(w,!0)}async function et(){try{Y(D,null),Y(f,await Ae.getStatus(),!0),o(f)&&Y(nt,o(f).uptime_seconds,!0),Y(P,0),Y(I,!1),o(w)&&(Y(w,!1),F=setInterval(et,5e3))}catch($){Y(D,$ instanceof Error?$.message:"Failed to load status",!0),Y(I,!1),ae(P),se.error("Failed to load status",{description:o(D)}),o(P)>=T&&(Ct(),se.error("Auto-refresh paused",{description:`${T} failed attempts. Click Refresh to retry.`}))}}function Wt($){switch($){case"running":return"default";case"expired":return"secondary";case"destroyed":return"destructive";default:return"outline"}}he(()=>{et(),F=setInterval(et,5e3),X=setInterval(()=>{ae(nt)},1e3)}),ge(()=>{F&&clearInterval(F),X&&clearInterval(X)});var It=gr(),L=N(It),q=d(N(L),2),gt=N(q);{var de=$=>{var M=Ge();t($,M)};_t(gt,$=>{o(w)&&$(de)})}var ie=d(gt,2);Te(ie,{onclick:et,variant:"outline",size:"sm",children:($,M)=>{var z=He(),st=a(z);Ee(st,{class:"mr-2 h-4 w-4"}),p(),t($,z)},$$slots:{default:!0}}),j(q),j(L);var Xt=d(L,2),ve=N(Xt);{var ue=$=>{var M=b(),z=a(M);Et(z,16,()=>Array(4),Ft,(st,rt)=>{var G=b(),dt=a(G);r(dt,()=>ct,(O,U)=>{U(O,{children:(at,k)=>{var x=Je(),y=a(x);r(y,()=>ft,(c,l)=>{l(c,{class:"flex flex-row items-center justify-between space-y-0 pb-2",children:(_,i)=>{Qt(_,{class:"h-4 w-20"})},$$slots:{default:!0}})});var V=d(y,2);r(V,()=>ut,(c,l)=>{l(c,{children:(_,i)=>{Qt(_,{class:"h-8 w-16"})},$$slots:{default:!0}})}),t(at,x)},$$slots:{default:!0}})}),t(st,G)}),t($,M)},ce=$=>{var M=b(),z=a(M);{var st=rt=>{var G=dr(),dt=a(G);r(dt,()=>ct,(k,x)=>{x(k,{children:(y,V)=>{var c=Ze(),l=a(c);r(l,()=>ft,(i,v)=>{v(i,{class:"flex flex-row items-center justify-between space-y-0 pb-2",children:(m,h)=>{var s=Ke(),n=a(s);r(n,()=>yt,(B,R)=>{R(B,{class:"text-sm font-medium",children:(H,ot)=>{p();var E=S("Total Sessions");t(H,E)},$$slots:{default:!0}})});var g=d(n,2);ne(g,{class:"h-4 w-4 text-muted-foreground"}),t(m,s)},$$slots:{default:!0}})});var _=d(l,2);r(_,()=>ut,(i,v)=>{v(i,{children:(m,h)=>{var s=Qe(),n=a(s),g=N(n,!0);j(n),p(2),tt(()=>Z(g,o(f).total_sessions)),t(m,s)},$$slots:{default:!0}})}),t(y,c)},$$slots:{default:!0}})});var O=d(dt,2);r(O,()=>ct,(k,x)=>{x(k,{children:(y,V)=>{var c=er(),l=a(c);r(l,()=>ft,(i,v)=>{v(i,{class:"flex flex-row items-center justify-between space-y-0 pb-2",children:(m,h)=>{var s=Ye(),n=a(s);r(n,()=>yt,(B,R)=>{R(B,{class:"text-sm font-medium",children:(H,ot)=>{p();var E=S("Active");t(H,E)},$$slots:{default:!0}})});var g=d(n,2);Re(g,{class:"h-4 w-4 text-green-600"}),t(m,s)},$$slots:{default:!0}})});var _=d(l,2);r(_,()=>ut,(i,v)=>{v(i,{children:(m,h)=>{var s=tr(),n=a(s),g=N(n,!0);j(n),p(2),tt(()=>Z(g,o(f).active_sessions)),t(m,s)},$$slots:{default:!0}})}),t(y,c)},$$slots:{default:!0}})});var U=d(O,2);r(U,()=>ct,(k,x)=>{x(k,{children:(y,V)=>{var c=sr(),l=a(c);r(l,()=>ft,(i,v)=>{v(i,{class:"flex flex-row items-center justify-between space-y-0 pb-2",children:(m,h)=>{var s=rr(),n=a(s);r(n,()=>yt,(B,R)=>{R(B,{class:"text-sm font-medium",children:(H,ot)=>{p();var E=S("Expired");t(H,E)},$$slots:{default:!0}})});var g=d(n,2);Fe(g,{class:"h-4 w-4 text-yellow-600"}),t(m,s)},$$slots:{default:!0}})});var _=d(l,2);r(_,()=>ut,(i,v)=>{v(i,{children:(m,h)=>{var s=ar(),n=a(s),g=N(n,!0);j(n),p(2),tt(()=>Z(g,o(f).expired_sessions)),t(m,s)},$$slots:{default:!0}})}),t(y,c)},$$slots:{default:!0}})});var at=d(U,2);r(at,()=>ct,(k,x)=>{x(k,{children:(y,V)=>{var c=nr(),l=a(c);r(l,()=>ft,(i,v)=>{v(i,{class:"flex flex-row items-center justify-between space-y-0 pb-2",children:(m,h)=>{var s=or(),n=a(s);r(n,()=>yt,(B,R)=>{R(B,{class:"text-sm font-medium",children:(H,ot)=>{p();var E=S("Uptime");t(H,E)},$$slots:{default:!0}})});var g=d(n,2);Oe(g,{class:"h-4 w-4 text-muted-foreground"}),t(m,s)},$$slots:{default:!0}})});var _=d(l,2);r(_,()=>ut,(i,v)=>{v(i,{children:(m,h)=>{var s=lr(),n=a(s),g=N(n,!0);j(n),p(2),tt(B=>Z(g,B),[()=>De(o(nt))]),t(m,s)},$$slots:{default:!0}})}),t(y,c)},$$slots:{default:!0}})}),t(rt,G)};_t(z,rt=>{o(f)&&rt(st)},!0)}t($,M)};_t(ve,$=>{o(I)?$(ue):$(ce,!1)})}j(Xt);var Yt=d(Xt,2);{var fe=$=>{var M=b(),z=a(M);r(z,()=>ct,(st,rt)=>{rt(st,{children:(G,dt)=>{var O=ur(),U=a(O);r(U,()=>ft,(k,x)=>{x(k,{children:(y,V)=>{var c=ir(),l=a(c);r(l,()=>yt,(i,v)=>{v(i,{children:(m,h)=>{p();var s=S("Container Pool Status");t(m,s)},$$slots:{default:!0}})});var _=d(l,2);r(_,()=>oe,(i,v)=>{v(i,{children:(m,h)=>{p();var s=S("Pre-warmed containers ready for instant use");t(m,s)},$$slots:{default:!0}})}),t(y,c)},$$slots:{default:!0}})});var at=d(U,2);r(at,()=>ut,(k,x)=>{x(k,{class:"space-y-4",children:(y,V)=>{var c=b(),l=a(c);Et(l,17,()=>Object.entries(o(f).pool.images),Ft,(_,i)=>{var v=mt(()=>xe(o(i),2));let m=()=>o(v)[0],h=()=>o(v)[1];var s=vr(),n=N(s),g=N(n),B=N(g,!0);j(g);var R=d(g,2),H=N(R);j(R),j(n);var ot=d(n,2);{let E=mt(()=>h().current/h().target*100);ze(ot,{get value(){return o(E)}})}j(s),tt(()=>{Z(B,m()),Z(H,`${h().current??""} / ${h().target??""}`)}),t(_,s)}),t(y,c)},$$slots:{default:!0}})}),t(G,O)},$$slots:{default:!0}})}),t($,M)};_t(Yt,$=>{o(f)?.pool?.enabled&&Object.keys(o(f).pool.images).length>0&&$(fe)})}var _e=d(Yt,2);r(_e,()=>ct,($,M)=>{M($,{children:(z,st)=>{var rt=hr(),G=a(rt);r(G,()=>ft,(O,U)=>{U(O,{children:(at,k)=>{var x=cr(),y=a(x);r(y,()=>yt,(c,l)=>{l(c,{children:(_,i)=>{p();var v=S("Recent Sessions");t(_,v)},$$slots:{default:!0}})});var V=d(y,2);r(V,()=>oe,(c,l)=>{l(c,{children:(_,i)=>{p();var v=S("Last 5 sessions created");t(_,v)},$$slots:{default:!0}})}),t(at,x)},$$slots:{default:!0}})});var dt=d(G,2);r(dt,()=>ut,(O,U)=>{U(O,{children:(at,k)=>{var x=b(),y=a(x);{var V=l=>{var _=fr();Et(_,20,()=>Array(3),Ft,(i,v)=>{Qt(i,{class:"h-12 w-full"})}),j(_),t(l,_)},c=l=>{var _=b(),i=a(_);{var v=h=>{var s=b(),n=a(s);r(n,()=>je,(g,B)=>{B(g,{children:(R,H)=>{var ot=mr(),E=a(ot);r(E,()=>ke,(qt,zt)=>{zt(qt,{children:(Gt,me)=>{var St=b(),Ht=a(St);r(Ht,()=>le,(Jt,W)=>{W(Jt,{children:(Nt,te)=>{var Mt=_r(),Bt=a(Mt);r(Bt,()=>Ot,(J,K)=>{K(J,{children:(Q,Tt)=>{p();var A=S("ID");t(Q,A)},$$slots:{default:!0}})});var Dt=d(Bt,2);r(Dt,()=>Ot,(J,K)=>{K(J,{children:(Q,Tt)=>{p();var A=S("Image");t(Q,A)},$$slots:{default:!0}})});var Kt=d(Dt,2);r(Kt,()=>Ot,(J,K)=>{K(J,{children:(Q,Tt)=>{p();var A=S("Status");t(Q,A)},$$slots:{default:!0}})});var Lt=d(Kt,2);r(Lt,()=>Ot,(J,K)=>{K(J,{children:(Q,Tt)=>{p();var A=S("Created");t(Q,A)},$$slots:{default:!0}})}),t(Nt,Mt)},$$slots:{default:!0}})}),t(Gt,St)},$$slots:{default:!0}})});var $e=d(E,2);r($e,()=>Ne,(qt,zt)=>{zt(qt,{children:(Gt,me)=>{var St=b(),Ht=a(St);Et(Ht,17,()=>o(f).sessions.slice(0,5),Ft,(Jt,W)=>{var Nt=b(),te=a(Nt);r(te,()=>le,(Mt,Bt)=>{Bt(Mt,{children:(Dt,Kt)=>{var Lt=$r(),J=a(Lt);r(J,()=>Ut,(A,it)=>{it(A,{class:"font-mono text-xs",children:(vt,Rt)=>{p();var lt=S();tt(xt=>Z(lt,xt),[()=>o(W).id?`${o(W).id.substring(0,12)}...`:"-"]),t(vt,lt)},$$slots:{default:!0}})});var K=d(J,2);r(K,()=>Ut,(A,it)=>{it(A,{children:(vt,Rt)=>{p();var lt=S();tt(()=>Z(lt,o(W).image??"-")),t(vt,lt)},$$slots:{default:!0}})});var Q=d(K,2);r(Q,()=>Ut,(A,it)=>{it(A,{children:(vt,Rt)=>{{let lt=mt(()=>Wt(o(W).status??""));Le(vt,{get variant(){return o(lt)},children:(xt,ee)=>{p();var re=S();tt(()=>Z(re,o(W).status??"-")),t(xt,re)},$$slots:{default:!0}})}},$$slots:{default:!0}})});var Tt=d(Q,2);{let A=mt(()=>o(W).created_at?Be(o(W).created_at):"");r(Tt,()=>Ut,(it,vt)=>{vt(it,{class:"text-muted-foreground",get title(){return o(A)},children:(Rt,lt)=>{p();var xt=S();tt(ee=>Z(xt,ee),[()=>o(W).created_at?Me(o(W).created_at):"-"]),t(Rt,xt)},$$slots:{default:!0}})})}t(Dt,Lt)},$$slots:{default:!0}})}),t(Jt,Nt)}),t(Gt,St)},$$slots:{default:!0}})}),t(R,ot)},$$slots:{default:!0}})}),t(h,s)},m=h=>{var s=pr(),n=N(s);ne(n,{class:"mb-2 h-8 w-8 text-muted-foreground"}),p(2),j(s),t(h,s)};_t(i,h=>{o(f)&&o(f).sessions.length>0?h(v):h(m,!1)},!0)}t(l,_)};_t(y,l=>{o(I)?l(V):l(c,!1)})}t(at,x)},$$slots:{default:!0}})}),t(z,rt)},$$slots:{default:!0}})}),j(It),t(C,It),ht()}export{jr as component};
