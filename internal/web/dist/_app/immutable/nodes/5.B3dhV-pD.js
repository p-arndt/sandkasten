import{c as V,a as r,o as Xt,p as Me,f as p,g as Zt,t as ve,s as $e}from"../chunks/DFhzKIwN.js";import{p as Y,f as v,n as me,a as Q,k as $,g as t,K as c,Q as H,u as er,G as m,I as g,J as n,a_ as tr,U as rr,P as or,W as j,t as ye,X as sr}from"../chunks/C9Or7OaE.js";import{s as Ce,r as re,p as _,i as le,c as k,b as ze,a as ar,d as nr}from"../chunks/8ZJiUQMh.js";import{I as Ot,s as te,f as De,x as Re,y as dt,z as Et,b as N,g as Rt,h as Fe,a as xe,m as Le,A as ir,C as lr,D as dr,t as cr,c as Ie,B as Ae,l as ur,n as vr,E as pr,F as fr,j as Ke,k as pe}from"../chunks/BzMl8pwZ.js";import{C as Ne,a as Ue}from"../chunks/D73sW1Zq.js";import{C as Ve,a as qe,b as Te}from"../chunks/ClfVuNQR.js";import{C as Mt,w as at}from"../chunks/HXiTSFb8.js";import{S as Dt,E as Ft,P as hr,a as gr,n as lt}from"../chunks/BR5K5hjF.js";import{b as mr,I as ge}from"../chunks/mkft7m0k.js";import"../chunks/DG_vNDxm.js";import{i as _r}from"../chunks/CzbvquBz.js";import{H as br,L as At}from"../chunks/CDXDrHCc.js";import{S as yr}from"../chunks/DiPVPWZ8.js";import{g as xr,K as Ct,s as kr}from"../chunks/CMPeZjo0.js";import{g as St,P as Pr,D as nt,s as Kt,a as Be,b as wr}from"../chunks/CtQ5O-9i.js";import{R as $r}from"../chunks/DfOameym.js";import{C as Ar}from"../chunks/BiFI3i4V.js";function it(b,e){Y(e,!0);let l=re(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];Ot(b,Ce({name:"save"},()=>l,{get iconNode(){return s},children:(d,u)=>{var i=V(),f=v(i);te(f,()=>e.children??me),r(d,i)},$$slots:{default:!0}})),Q()}function Cr(b,e){Y(e,!0);let l=re(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];Ot(b,Ce({name:"triangle-alert"},()=>l,{get iconNode(){return s},children:(d,u)=>{var i=V(),f=v(i);te(f,()=>e.children??me),r(d,i)},$$slots:{default:!0}})),Q()}const ct=Rt({component:"collapsible",parts:["root","content","trigger"]}),ut=new Mt("Collapsible.Root");class vt{static create(e){return ut.set(new vt(e))}opts;attachment;#e=H(null);get contentNode(){return t(this.#e)}set contentNode(e){c(this.#e,e,!0)}contentPresence;#t=H(void 0);get contentId(){return t(this.#t)}set contentId(e){c(this.#t,e,!0)}constructor(e){this.opts=e,this.toggleOpen=this.toggleOpen.bind(this),this.attachment=De(this.opts.ref),this.contentPresence=new hr({ref:N(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}})}toggleOpen(){this.opts.open.current=!this.opts.open.current}#r=$(()=>({id:this.opts.id.current,"data-state":dt(this.opts.open.current),"data-disabled":Re(this.opts.disabled.current),[ct.root]:"",...this.attachment}));get props(){return t(this.#r)}set props(e){c(this.#r,e)}}class pt{static create(e){return new pt(e,ut.get())}opts;root;attachment;#e=$(()=>this.opts.hiddenUntilFound.current?this.root.opts.open.current:this.opts.forceMount.current||this.root.opts.open.current);get present(){return t(this.#e)}set present(e){c(this.#e,e)}#t;#r=H(!1);#o=H(0);#s=H(0);constructor(e,l){this.opts=e,this.root=l,c(this.#r,l.opts.open.current,!0),this.root.contentId=this.opts.id.current,this.attachment=De(this.opts.ref,s=>this.root.contentNode=s),at.pre(()=>this.opts.id.current,s=>{this.root.contentId=s}),er(()=>{const s=requestAnimationFrame(()=>{c(this.#r,!1)});return()=>{cancelAnimationFrame(s)}}),at.pre([()=>this.opts.ref.current,()=>this.opts.hiddenUntilFound.current],([s,d])=>!s||!d?void 0:Xt(s,"beforematch",()=>{this.root.opts.open.current||requestAnimationFrame(()=>{this.root.opts.open.current=!0})})),at([()=>this.opts.ref.current,()=>this.present],([s])=>{s&&gr(()=>{if(!this.opts.ref.current)return;this.#t=this.#t||{transitionDuration:s.style.transitionDuration,animationName:s.style.animationName},s.style.transitionDuration="0s",s.style.animationName="none";const d=s.getBoundingClientRect();if(c(this.#s,d.height,!0),c(this.#o,d.width,!0),!t(this.#r)){const{animationName:u,transitionDuration:i}=this.#t;s.style.transitionDuration=i,s.style.animationName=u}})})}get shouldRender(){return this.root.contentPresence.shouldRender}#a=$(()=>({open:this.root.opts.open.current}));get snippetProps(){return t(this.#a)}set snippetProps(e){c(this.#a,e)}#n=$(()=>({id:this.opts.id.current,style:{"--bits-collapsible-content-height":t(this.#s)?`${t(this.#s)}px`:void 0,"--bits-collapsible-content-width":t(this.#o)?`${t(this.#o)}px`:void 0},hidden:this.opts.hiddenUntilFound.current&&!this.root.opts.open.current?"until-found":void 0,"data-state":dt(this.root.opts.open.current),"data-disabled":Re(this.root.opts.disabled.current),[ct.content]:"",...this.opts.hiddenUntilFound.current&&!this.shouldRender?{}:{hidden:this.opts.hiddenUntilFound.current?!this.shouldRender:this.opts.forceMount.current?void 0:!this.shouldRender},...this.attachment}));get props(){return t(this.#n)}set props(e){c(this.#n,e)}}class ft{static create(e){return new ft(e,ut.get())}opts;root;attachment;#e=$(()=>this.opts.disabled.current||this.root.opts.disabled.current);constructor(e,l){this.opts=e,this.root=l,this.attachment=De(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){if(!t(this.#e)){if(e.button!==0)return e.preventDefault();this.root.toggleOpen()}}onkeydown(e){t(this.#e)||(e.key===Dt||e.key===Ft)&&(e.preventDefault(),this.root.toggleOpen())}#t=$(()=>({id:this.opts.id.current,type:"button",disabled:t(this.#e),"aria-controls":this.root.contentId,"aria-expanded":Et(this.root.opts.open.current),"data-state":dt(this.root.opts.open.current),"data-disabled":Re(t(this.#e)),[ct.trigger]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return t(this.#t)}set props(e){c(this.#t,e)}}var Sr=p("<div><!></div>");function Kr(b,e){const l=Me();Y(e,!0);let s=_(e,"id",19,()=>Fe(l)),d=_(e,"ref",15,null),u=_(e,"open",15,!1),i=_(e,"disabled",3,!1),f=_(e,"onOpenChange",3,lt),A=_(e,"onOpenChangeComplete",3,lt),R=re(e,["$$slots","$$events","$$legacy","children","child","id","ref","open","disabled","onOpenChange","onOpenChangeComplete"]);const q=vt.create({open:N(()=>u(),S=>{u(S),f()(S)}),disabled:N(()=>i()),id:N(()=>s()),ref:N(()=>d(),S=>d(S)),onOpenChangeComplete:N(()=>A())}),J=$(()=>Le(R,q.props));var C=V(),o=v(C);{var y=S=>{var z=V(),ke=v(z);te(ke,()=>e.child,()=>({props:t(J)})),r(S,z)},w=S=>{var z=Sr();xe(z,()=>({...t(J)}));var ke=m(z);te(ke,()=>e.children??me),g(z),r(S,z)};le(o,S=>{e.child?S(y):S(w,!1)})}r(b,C),Q()}var Ir=p("<div><!></div>");function Or(b,e){const l=Me();Y(e,!0);let s=_(e,"ref",15,null),d=_(e,"forceMount",3,!1),u=_(e,"hiddenUntilFound",3,!1),i=_(e,"id",19,()=>Fe(l)),f=re(e,["$$slots","$$events","$$legacy","child","ref","forceMount","hiddenUntilFound","children","id"]);const A=pt.create({id:N(()=>i()),forceMount:N(()=>d()),hiddenUntilFound:N(()=>u()),ref:N(()=>s(),y=>s(y))}),R=$(()=>Le(f,A.props));var q=V(),J=v(q);{var C=y=>{var w=V(),S=v(w);{let z=$(()=>({...A.snippetProps,props:t(R)}));te(S,()=>e.child,()=>t(z))}r(y,w)},o=y=>{var w=Ir();xe(w,()=>({...t(R)}));var S=m(w);te(S,()=>e.children??me),g(w),r(y,w)};le(J,y=>{e.child?y(C):y(o,!1)})}r(b,q),Q()}var Er=p("<button><!></button>");function Rr(b,e){const l=Me();Y(e,!0);let s=_(e,"ref",15,null),d=_(e,"id",19,()=>Fe(l)),u=_(e,"disabled",3,!1),i=re(e,["$$slots","$$events","$$legacy","children","child","ref","id","disabled"]);const f=ft.create({id:N(()=>d()),ref:N(()=>s(),o=>s(o)),disabled:N(()=>u())}),A=$(()=>Le(i,f.props));var R=V(),q=v(R);{var J=o=>{var y=V(),w=v(y);te(w,()=>e.child,()=>({props:t(A)})),r(o,y)},C=o=>{var y=Er();xe(y,()=>({...t(A)}));var w=m(y);te(w,()=>e.children??me),g(y),r(o,y)};le(q,o=>{e.child?o(J):o(C,!1)})}r(b,R),Q()}const Lt=Rt({component:"switch",parts:["root","thumb"]}),ht=new Mt("Switch.Root");class gt{static create(e){return ht.set(new gt(e))}opts;attachment;constructor(e){this.opts=e,this.attachment=De(e.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this)}#e(){this.opts.checked.current=!this.opts.checked.current}onkeydown(e){!(e.key===Ft||e.key===Dt)||this.opts.disabled.current||(e.preventDefault(),this.#e())}onclick(e){this.opts.disabled.current||this.#e()}#t=$(()=>({"data-disabled":Re(this.opts.disabled.current),"data-state":ir(this.opts.checked.current),"data-required":Re(this.opts.required.current)}));get sharedProps(){return t(this.#t)}set sharedProps(e){c(this.#t,e)}#r=$(()=>({checked:this.opts.checked.current}));get snippetProps(){return t(this.#r)}set snippetProps(e){c(this.#r,e)}#o=$(()=>({...this.sharedProps,id:this.opts.id.current,role:"switch",disabled:dr(this.opts.disabled.current),"aria-checked":lr(this.opts.checked.current),"aria-required":Et(this.opts.required.current),[Lt.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return t(this.#o)}set props(e){c(this.#o,e)}}class mt{static create(){return new mt(ht.get())}root;#e=$(()=>this.root.opts.name.current!==void 0);get shouldRender(){return t(this.#e)}set shouldRender(e){c(this.#e,e)}constructor(e){this.root=e}#t=$(()=>({type:"checkbox",name:this.root.opts.name.current,value:this.root.opts.value.current,checked:this.root.opts.checked.current,disabled:this.root.opts.disabled.current,required:this.root.opts.required.current}));get props(){return t(this.#t)}set props(e){c(this.#t,e)}}class _t{static create(e){return new _t(e,ht.get())}opts;root;attachment;constructor(e,l){this.opts=e,this.root=l,this.attachment=De(e.ref)}#e=$(()=>({checked:this.root.opts.checked.current}));get snippetProps(){return t(this.#e)}set snippetProps(e){c(this.#e,e)}#t=$(()=>({...this.root.sharedProps,id:this.opts.id.current,[Lt.thumb]:"",...this.attachment}));get props(){return t(this.#t)}set props(e){c(this.#t,e)}}function Mr(b,e){Y(e,!1);const l=mt.create();_r();var s=V(),d=v(s);{var u=i=>{br(i,Ce(()=>l.props))};le(d,i=>{l.shouldRender&&i(u)})}r(b,s),Q()}var Dr=p("<button><!></button>"),Fr=p("<!> <!>",1);function Lr(b,e){const l=Me();Y(e,!0);let s=_(e,"ref",15,null),d=_(e,"id",19,()=>Fe(l)),u=_(e,"disabled",3,!1),i=_(e,"required",3,!1),f=_(e,"checked",15,!1),A=_(e,"value",3,"on"),R=_(e,"name",3,void 0),q=_(e,"type",3,"button"),J=_(e,"onCheckedChange",3,lt),C=re(e,["$$slots","$$events","$$legacy","child","children","ref","id","disabled","required","checked","value","name","type","onCheckedChange"]);const o=gt.create({checked:N(()=>f(),se=>{f(se),J()?.(se)}),disabled:N(()=>u()??!1),required:N(()=>i()),value:N(()=>A()),name:N(()=>R()),id:N(()=>d()),ref:N(()=>s(),se=>s(se))}),y=$(()=>Le(C,o.props,{type:q()}));var w=Fr(),S=v(w);{var z=se=>{var _e=V(),Oe=v(_e);{let He=$(()=>({props:t(y),...o.snippetProps}));te(Oe,()=>e.child,()=>t(He))}r(se,_e)},ke=se=>{var _e=Dr();xe(_e,()=>({...t(y)}));var Oe=m(_e);te(Oe,()=>e.children??me,()=>o.snippetProps),g(_e),r(se,_e)};le(S,se=>{e.child?se(z):se(ke,!1)})}var Ge=n(S,2);Mr(Ge,{}),r(b,w),Q()}var jr=p("<span><!></span>");function Nr(b,e){const l=Me();Y(e,!0);let s=_(e,"ref",15,null),d=_(e,"id",19,()=>Fe(l)),u=re(e,["$$slots","$$events","$$legacy","child","children","ref","id"]);const i=_t.create({id:N(()=>d()),ref:N(()=>s(),C=>s(C))}),f=$(()=>Le(u,i.props));var A=V(),R=v(A);{var q=C=>{var o=V(),y=v(o);{let w=$(()=>({props:t(f),...i.snippetProps}));te(y,()=>e.child,()=>t(w))}r(C,o)},J=C=>{var o=jr();xe(o,()=>({...t(f)}));var y=m(o);te(y,()=>e.children??me,()=>i.snippetProps),g(o),r(C,o)};le(R,C=>{e.child?C(q):C(J,!1)})}r(b,A),Q()}function Ur(b,e){Y(e,!0);let l=_(e,"ref",15,null),s=_(e,"open",15,!1),d=re(e,["$$slots","$$events","$$legacy","ref","open"]);var u=V(),i=v(u);k(i,()=>Kr,(f,A)=>{A(f,Ce({"data-slot":"collapsible"},()=>d,{get ref(){return l()},set ref(R){l(R)},get open(){return s()},set open(R){s(R)}}))}),r(b,u),Q()}function Vr(b,e){Y(e,!0);let l=_(e,"ref",15,null),s=re(e,["$$slots","$$events","$$legacy","ref"]);var d=V(),u=v(d);k(u,()=>Rr,(i,f)=>{f(i,Ce({"data-slot":"collapsible-trigger"},()=>s,{get ref(){return l()},set ref(A){l(A)}}))}),r(b,d),Q()}function qr(b,e){Y(e,!0);let l=_(e,"ref",15,null),s=re(e,["$$slots","$$events","$$legacy","ref"]);var d=V(),u=v(d);k(u,()=>Or,(i,f)=>{f(i,Ce({"data-slot":"collapsible-content"},()=>s,{get ref(){return l()},set ref(A){l(A)}}))}),r(b,d),Q()}const Tr=cr({base:"relative grid w-full grid-cols-[0_1fr] items-start gap-y-0.5 rounded-lg border px-4 py-3 text-sm has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] has-[>svg]:gap-x-3 [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card *:data-[slot=alert-description]:text-destructive/90 [&>svg]:text-current"}},defaultVariants:{variant:"default"}});var Br=p("<div><!></div>");function zr(b,e){Y(e,!0);let l=_(e,"ref",15,null),s=_(e,"variant",3,"default"),d=re(e,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var u=Br();xe(u,f=>({"data-slot":"alert",class:f,...d,role:"alert"}),[()=>Ie(Tr({variant:s()}),e.class)]);var i=m(u);te(i,()=>e.children??me),g(u),ze(u,f=>l(f),()=>l()),r(b,u),Q()}var Gr=p("<div><!></div>");function Hr(b,e){Y(e,!0);let l=_(e,"ref",15,null),s=re(e,["$$slots","$$events","$$legacy","ref","class","children"]);var d=Gr();xe(d,i=>({"data-slot":"alert-description",class:i,...s}),[()=>Ie("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e.class)]);var u=m(d);te(u,()=>e.children??me),g(d),ze(d,i=>l(i),()=>l()),r(b,d),Q()}var Jr=p("<div><!></div>");function Wr(b,e){Y(e,!0);let l=_(e,"ref",15,null),s=re(e,["$$slots","$$events","$$legacy","ref","class","children"]);var d=Jr();xe(d,i=>({"data-slot":"alert-title",class:i,...s}),[()=>Ie("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e.class)]);var u=m(d);te(u,()=>e.children??me),g(d),ze(d,i=>l(i),()=>l()),r(b,d),Q()}function It(b,e){Y(e,!0);let l=_(e,"ref",15,null),s=_(e,"checked",15,!1),d=re(e,["$$slots","$$events","$$legacy","ref","class","checked"]);var u=V(),i=v(u);{let f=$(()=>Ie("data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 peer inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e.class));k(i,()=>Lr,(A,R)=>{R(A,Ce({"data-slot":"switch",get class(){return t(f)}},()=>d,{get ref(){return l()},set ref(q){l(q)},get checked(){return s()},set checked(q){s(q)},children:(q,J)=>{var C=V(),o=v(C);{let y=$(()=>Ie("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"));k(o,()=>Nr,(w,S)=>{S(w,{"data-slot":"switch-thumb",get class(){return t(y)}})})}r(q,C)},$$slots:{default:!0}}))})}r(b,u),Q()}var Yr=p("<textarea></textarea>");function Qr(b,e){Y(e,!0);let l=_(e,"ref",15,null),s=_(e,"value",15),d=_(e,"data-slot",3,"textarea"),u=re(e,["$$slots","$$events","$$legacy","ref","value","class","data-slot"]);var i=Yr();tr(i),xe(i,f=>({"data-slot":d(),class:f,...u}),[()=>Ie("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),ze(i,f=>l(f),()=>l()),mr(i,s),r(b,i),Q()}var Xr=p("<!> API Key",1),Zr=p('Dashboard uses this key to authenticate with the Sandkasten daemon. Use the same value as <code class="rounded bg-muted px-1 py-0.5 text-xs">api_key</code> in your daemon config. You can also set it from the banner at the top when not connected.',1),eo=p("<!> <!>",1),to=p("<!> Save Key",1),ro=p('<p class="text-xs text-muted-foreground">A key is stored. Enter a new value and save to replace, or save with an empty field to clear.</p>'),oo=p('<div class="flex gap-2"><!> <!></div> <!>',1),so=p("<!> <!>",1),ao=p("<!> Playground (model provider)",1),no=p("<!> <!>",1),io=p('<p class="text-sm text-destructive"> </p>'),lo=p("<option> </option>"),co=p('<div><label for="pg-openai-key" class="mb-1 block text-sm font-medium">OpenAI API key</label> <!></div>'),uo=p('<div><label for="pg-google-key" class="mb-1 block text-sm font-medium">Google API key (Gemini)</label> <!></div>'),vo=p('<div class="space-y-3"><div><label for="pg-vertex-key" class="mb-1 block text-sm font-medium">Vertex API key or service account JSON</label> <!></div> <div class="flex gap-4"><div><label for="pg-vertex-project" class="mb-1 block text-sm font-medium">Project ID</label> <!></div> <div><label for="pg-vertex-location" class="mb-1 block text-sm font-medium">Location</label> <!></div></div> <p class="text-xs text-muted-foreground">Express mode: API key only, leave project empty. Project mode: set project + location and paste service account JSON in the key field.</p></div>'),po=p('<div><label for="pg-workspace-id" class="mb-1 block text-sm font-medium">Workspace ID</label> <!></div>'),fo=p("<!> Save Playground settings",1),ho=p('<div class="flex flex-col gap-3 rounded-lg border p-4"><p class="font-medium">Backend config file</p> <p class="text-sm text-muted-foreground">Daemon reads/writes a JSON file (playground_config_path). Load fills keys in memory only; Save writes current provider and API keys to the file. File is created if missing.</p> <div class="flex flex-wrap items-center gap-2"><!> <!></div> <!></div> <div class="flex flex-wrap items-center gap-4"><div><label for="pg-provider" class="mb-1 block text-sm font-medium">Provider</label> <select id="pg-provider" class="rounded-md border bg-background px-3 py-2 text-sm"></select></div> <div class="min-w-[200px]"><label for="pg-model" class="mb-1 block text-sm font-medium">Model</label> <!></div></div> <!> <div class="flex items-center justify-between rounded-lg border p-4"><div class="space-y-0.5"><!> <p class="text-sm text-muted-foreground">When off, keys are kept only in memory until you leave the page. More secure; you re-enter keys after refresh.</p></div> <!></div> <div class="rounded-lg border p-4 space-y-4"><h4 class="font-medium">Session options</h4> <div class="grid gap-4 sm:grid-cols-2"><div><label for="pg-session-image" class="mb-1 block text-sm font-medium">Image</label> <!></div> <div><label for="pg-session-ttl" class="mb-1 block text-sm font-medium">TTL (seconds)</label> <!></div></div> <div class="flex items-center justify-between rounded-md border p-3"><div class="space-y-0.5"><!> <p class="text-xs text-muted-foreground">Files survive session end. Requires daemon <code class="rounded bg-muted px-1">workspace.enabled: true</code>.</p></div> <!></div> <!></div> <!>',1),go=p("<!> <!>",1),mo=p("<!> <!> <!>",1),_o=p('Editing: <code class="rounded bg-muted px-1 py-0.5 text-xs"> </code>',1),bo=p("<!> <!>",1),yo=p("<!> ",1),xo=p("<!> Reload from File",1),ko=p("<!> ",1),Po=p('<!> <div class="flex gap-2"><!> <!> <!></div>',1),wo=p("<!> <!>",1),$o=p('<div class="flex items-center justify-between"><div><!> <!></div> <!></div>'),Ao=p('<div><h4 class="mb-1 font-semibold">listen:</h4> <p class="text-muted-foreground">Host and port to bind (e.g., "127.0.0.1:8080")</p></div> <div><h4 class="mb-1 font-semibold">api_key:</h4> <p class="text-muted-foreground">API key for authentication (Bearer token)</p></div> <div><h4 class="mb-1 font-semibold">default_image:</h4> <p class="text-muted-foreground">Default Docker image for sessions</p></div> <div><h4 class="mb-1 font-semibold">allowed_images:</h4> <p class="text-muted-foreground">List of allowed Docker images</p></div> <div><h4 class="mb-1 font-semibold">db_path:</h4> <p class="text-muted-foreground">Path to SQLite database file</p></div> <div><h4 class="mb-1 font-semibold">session_ttl_seconds:</h4> <p class="text-muted-foreground">Default session lifetime in seconds</p></div> <div><h4 class="mb-1 font-semibold">defaults.cpu_limit:</h4> <p class="text-muted-foreground">CPU limit (e.g., 1.0 = 1 core)</p></div> <div><h4 class="mb-1 font-semibold">defaults.mem_limit_mb:</h4> <p class="text-muted-foreground">Memory limit in megabytes</p></div> <div><h4 class="mb-1 font-semibold">defaults.pids_limit:</h4> <p class="text-muted-foreground">Process limit</p></div> <div><h4 class="mb-1 font-semibold">defaults.max_exec_timeout_ms:</h4> <p class="text-muted-foreground">Maximum exec timeout in milliseconds</p></div> <div><h4 class="mb-1 font-semibold">defaults.network_mode:</h4> <p class="text-muted-foreground">Network mode ("none", "bridge", "host")</p></div> <div><h4 class="mb-1 font-semibold">defaults.readonly_rootfs:</h4> <p class="text-muted-foreground">Whether to make rootfs read-only (true/false)</p></div> <div><h4 class="mb-1 font-semibold">pool.enabled:</h4> <p class="text-muted-foreground">Enable container pool for fast session creation</p></div> <div><h4 class="mb-1 font-semibold">pool.images:</h4> <p class="text-muted-foreground">Map of image names to pool sizes (e.g., sandbox-runtime:python: 3)</p></div> <div><h4 class="mb-1 font-semibold">workspace.enabled:</h4> <p class="text-muted-foreground">Enable persistent workspace volumes</p></div> <div><h4 class="mb-1 font-semibold">workspace.persist_by_default:</h4> <p class="text-muted-foreground">Create persistent workspaces by default</p></div>',1),Co=p("<!> <!>",1),So=p('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold tracking-tight">Settings</h1> <p class="text-muted-foreground">Configure sandkasten daemon</p></div></div> <!> <!> <!> <!> <!></div>');function Go(b,e){Y(e,!0);const l=()=>nr(Be,"$sessionOnlyKeys",s),[s,d]=ar();let u=H(""),i=H(""),f=H(!0),A=H(!1),R=H(!1),q=H(!1),J=H(""),C=H(!1),o=H(rr(St())),y=H(!1),w=H(""),S=H(!1),z=H("");async function ke(){c(f,!0);try{const a=await Ke.getConfig();c(u,a.content,!0),c(i,a.path,!0),c(f,!1)}catch(a){pe.error("Failed to load configuration",{description:a instanceof Error?a.message:"Unknown error"}),c(f,!1)}}async function Ge(){c(A,!0);try{await Ke.saveConfig(t(u)),pe.success("Configuration saved",{description:"Restart the daemon to apply changes"})}catch(a){pe.error("Failed to save configuration",{description:a instanceof Error?a.message:"Unknown error"})}finally{c(A,!1)}}async function se(){c(R,!0);try{const a=await Ke.validateConfig(t(u));a.valid?pe.success("Configuration is valid",{description:"YAML syntax is correct"}):pe.error("Invalid configuration",{description:a.error||"YAML syntax error"})}catch(a){pe.error("Validation failed",{description:a instanceof Error?a.message:"Unknown error"})}finally{c(R,!1)}}function _e(){const a=t(J).trim()||null;kr(a),Ke.setAPIKey(a),c(J,""),c(C,!!a),pe.success(a?"API key saved":"API key cleared",{description:a?"Key is used for all API requests.":"Requests will no longer send a Bearer token."})}function Oe(){Kt(t(o)),t(o).persistProviderKeys?Be.set({}):Be.set({openaiApiKey:t(o).openaiApiKey||void 0,googleApiKey:t(o).googleApiKey||void 0,googleVertexApiKey:t(o).googleVertexApiKey||void 0}),pe.success("Playground settings saved")}function He(a){c(o,{...t(o),provider:a,model:t(o).model?.trim()||nt[a]},!0)}async function jt(){c(w,""),c(z,""),c(y,!0);try{const a=await Ke.getPlaygroundConfig(),de=a.provider||"openai",ae=a.model?.trim()||nt[de];c(o,{...t(o),provider:de,model:ae,vertexProject:a.vertexProject??t(o).vertexProject,vertexLocation:a.vertexLocation??t(o).vertexLocation,openaiApiKey:"",googleApiKey:"",googleVertexApiKey:""},!0),Kt(t(o)),Be.set({openaiApiKey:a.openaiApiKey||void 0,googleApiKey:a.googleApiKey||void 0,googleVertexApiKey:a.googleVertexApiKey||void 0}),pe.success("Provider keys loaded from backend",{description:"Keys are in memory only. Use Playground now."})}catch(a){c(w,a instanceof Error?a.message:"Failed to load",!0),pe.error("Failed to load from backend",{description:t(w)})}finally{c(y,!1)}}async function Nt(){c(z,""),c(w,""),c(S,!0);try{const a=wr(t(o),l());await Ke.savePlaygroundConfig({provider:a.provider,model:a.model,openaiApiKey:a.openaiApiKey,googleApiKey:a.googleApiKey,googleVertexApiKey:a.googleVertexApiKey,vertexProject:a.vertexProject,vertexLocation:a.vertexLocation}),pe.success("Playground config saved to backend",{description:"Stored in JSON file (playground_config_path)."})}catch(a){c(z,a instanceof Error?a.message:"Failed to save",!0),pe.error("Failed to save to backend",{description:t(z)})}finally{c(S,!1)}}or(()=>{ke(),xr()&&c(C,!0),c(o,St(),!0)});var Je=So(),bt=n(m(Je),2);k(bt,()=>Ue,(a,de)=>{de(a,{children:(ae,je)=>{var oe=so(),ne=v(oe);k(ne,()=>Ve,(Z,W)=>{W(Z,{children:(X,ce)=>{var M=eo(),K=v(M);k(K,()=>qe,(D,F)=>{F(D,{class:"flex items-center gap-2",children:(T,I)=>{var x=Xr(),P=v(x);Ct(P,{class:"h-5 w-5"}),j(),r(T,x)},$$slots:{default:!0}})});var G=n(K,2);k(G,()=>Te,(D,F)=>{F(D,{children:(T,I)=>{j();var x=Zr();j(2),r(T,x)},$$slots:{default:!0}})}),r(X,M)},$$slots:{default:!0}})});var fe=n(ne,2);k(fe,()=>Ne,(Z,W)=>{W(Z,{class:"space-y-4",children:(X,ce)=>{var M=oo(),K=v(M),G=m(K);{let I=$(()=>t(C)?"••••••••••••":"Enter API key");ge(G,{type:"password",get placeholder(){return t(I)},class:"max-w-md font-mono",autocomplete:"off",get value(){return t(J)},set value(x){c(J,x,!0)}})}var D=n(G,2);Ae(D,{onclick:_e,children:(I,x)=>{var P=to(),L=v(P);it(L,{class:"mr-2 h-4 w-4"}),j(),r(I,P)},$$slots:{default:!0}}),g(K);var F=n(K,2);{var T=I=>{var x=ro();r(I,x)};le(F,I=>{t(C)&&!t(J)&&I(T)})}r(X,M)},$$slots:{default:!0}})}),r(ae,oe)},$$slots:{default:!0}})});var yt=n(bt,2);k(yt,()=>Ue,(a,de)=>{de(a,{children:(ae,je)=>{var oe=go(),ne=v(oe);k(ne,()=>Ve,(Z,W)=>{W(Z,{children:(X,ce)=>{var M=no(),K=v(M);k(K,()=>qe,(D,F)=>{F(D,{class:"flex items-center gap-2",children:(T,I)=>{var x=ao(),P=v(x);Ct(P,{class:"h-5 w-5"}),j(),r(T,x)},$$slots:{default:!0}})});var G=n(K,2);k(G,()=>Te,(D,F)=>{F(D,{children:(T,I)=>{j();var x=ve("Provider and API key for the Playground coding agent. Choose OpenAI, Google (Gemini), or Google Vertex AI. Or load keys from the backend (daemon reads /config/config.json); keys are kept in memory only.");r(T,x)},$$slots:{default:!0}})}),r(X,M)},$$slots:{default:!0}})});var fe=n(ne,2);k(fe,()=>Ne,(Z,W)=>{W(Z,{class:"space-y-4",children:(X,ce)=>{var M=ho(),K=v(M),G=n(m(K),4),D=m(G);Ae(D,{variant:"outline",onclick:jt,get disabled(){return t(y)},children:(h,U)=>{j();var E=ve();ye(()=>$e(E,t(y)?"Loading…":"Load from backend")),r(h,E)},$$slots:{default:!0}});var F=n(D,2);Ae(F,{variant:"outline",onclick:Nt,get disabled(){return t(S)},children:(h,U)=>{j();var E=ve();ye(()=>$e(E,t(S)?"Saving…":"Save to backend")),r(h,E)},$$slots:{default:!0}}),g(G);var T=n(G,2);{var I=h=>{var U=io(),E=m(U,!0);g(U),ye(()=>$e(E,t(w)||t(z))),r(h,U)};le(T,h=>{(t(w)||t(z))&&h(I)})}g(K);var x=n(K,2),P=m(x),L=n(m(P),2);L.__change=h=>He(h.currentTarget.value),ur(L,21,()=>Object.entries(Pr),vr,(h,U)=>{var E=$(()=>sr(t(U),2));let he=()=>t(E)[0],rt=()=>t(E)[1];var ue=lo(),be=m(ue,!0);g(ue);var we={};ye(()=>{$e(be,rt()),we!==(we=he())&&(ue.value=(ue.__value=he())??"")}),r(h,ue)}),g(L);var ie;pr(L),g(P);var O=n(P,2),B=n(m(O),2);ge(B,{id:"pg-model",get placeholder(){return nt[t(o).provider]},class:"font-mono",get value(){return t(o).model},set value(h){t(o).model=h}}),g(O),g(x);var ee=n(x,2);{var Se=h=>{var U=co(),E=n(m(U),2);ge(E,{id:"pg-openai-key",type:"password",placeholder:"sk-...",class:"max-w-md font-mono",autocomplete:"off",get value(){return t(o).openaiApiKey},set value(he){t(o).openaiApiKey=he}}),g(U),r(h,U)},Pe=h=>{var U=V(),E=v(U);{var he=ue=>{var be=uo(),we=n(m(be),2);ge(we,{id:"pg-google-key",type:"password",placeholder:"AIza...",class:"max-w-md font-mono",autocomplete:"off",get value(){return t(o).googleApiKey},set value(ot){t(o).googleApiKey=ot}}),g(be),r(ue,be)},rt=ue=>{var be=vo(),we=m(be),ot=n(m(we),2);ge(ot,{id:"pg-vertex-key",type:"password",placeholder:"Express API key or paste JSON (client_email, private_key)",class:"max-w-md font-mono text-xs",autocomplete:"off",get value(){return t(o).googleVertexApiKey},set value(Ee){t(o).googleVertexApiKey=Ee}}),g(we);var wt=n(we,2),st=m(wt),Yt=n(m(st),2);ge(Yt,{id:"pg-vertex-project",placeholder:"my-gcp-project",class:"font-mono",get value(){return t(o).vertexProject},set value(Ee){t(o).vertexProject=Ee}}),g(st);var $t=n(st,2),Qt=n(m($t),2);ge(Qt,{id:"pg-vertex-location",placeholder:"us-central1",class:"font-mono",get value(){return t(o).vertexLocation},set value(Ee){t(o).vertexLocation=Ee}}),g($t),g(wt),j(2),g(be),r(ue,be)};le(E,ue=>{t(o).provider==="google"?ue(he):ue(rt,!1)},!0)}r(h,U)};le(ee,h=>{t(o).provider==="openai"?h(Se):h(Pe,!1)})}var We=n(ee,2),Ye=m(We),Vt=m(Ye);At(Vt,{for:"pg-persist-keys",class:"text-base",children:(h,U)=>{j();var E=ve("Save API keys in browser");r(h,E)},$$slots:{default:!0}}),j(2),g(Ye);var qt=n(Ye,2);It(qt,{id:"pg-persist-keys",get checked(){return t(o).persistProviderKeys},set checked(h){t(o).persistProviderKeys=h}}),g(We);var Qe=n(We,2),Xe=n(m(Qe),2),Ze=m(Xe),Tt=n(m(Ze),2);ge(Tt,{id:"pg-session-image",placeholder:"sandbox-runtime:python",class:"font-mono",get value(){return t(o).sessionImage},set value(h){t(o).sessionImage=h}}),g(Ze);var Pt=n(Ze,2),Bt=n(m(Pt),2);ge(Bt,{id:"pg-session-ttl",type:"number",min:"60",class:"font-mono",get value(){return t(o).sessionTtlSeconds},set value(h){t(o).sessionTtlSeconds=h}}),g(Pt),g(Xe);var et=n(Xe,2),tt=m(et),zt=m(tt);At(zt,{for:"pg-workspace-enabled",class:"text-sm",children:(h,U)=>{j();var E=ve("Use persistent workspace");r(h,E)},$$slots:{default:!0}}),j(2),g(tt);var Gt=n(tt,2);It(Gt,{id:"pg-workspace-enabled",get checked(){return t(o).workspaceEnabled},set checked(h){t(o).workspaceEnabled=h}}),g(et);var Ht=n(et,2);{var Jt=h=>{var U=po(),E=n(m(U),2);ge(E,{id:"pg-workspace-id",placeholder:"e.g. playground-default",class:"font-mono max-w-md",get value(){return t(o).workspaceId},set value(he){t(o).workspaceId=he}}),g(U),r(h,U)};le(Ht,h=>{t(o).workspaceEnabled&&h(Jt)})}g(Qe);var Wt=n(Qe,2);Ae(Wt,{onclick:Oe,children:(h,U)=>{var E=fo(),he=v(E);it(he,{class:"mr-2 h-4 w-4"}),j(),r(h,E)},$$slots:{default:!0}}),ye(()=>{ie!==(ie=t(o).provider)&&(L.value=(L.__value=t(o).provider)??"",fr(L,t(o).provider))}),r(X,M)},$$slots:{default:!0}})}),r(ae,oe)},$$slots:{default:!0}})});var xt=n(yt,2);k(xt,()=>zr,(a,de)=>{de(a,{variant:"destructive",children:(ae,je)=>{var oe=mo(),ne=v(oe);Cr(ne,{class:"h-4 w-4"});var fe=n(ne,2);k(fe,()=>Wr,(W,X)=>{X(W,{children:(ce,M)=>{j();var K=ve("Daemon Restart Required");r(ce,K)},$$slots:{default:!0}})});var Z=n(fe,2);k(Z,()=>Hr,(W,X)=>{X(W,{children:(ce,M)=>{j();var K=ve(`Changes to the configuration file require restarting the Sandkasten daemon to take effect.\r
			Invalid YAML will prevent the daemon from starting.`);r(ce,K)},$$slots:{default:!0}})}),r(ae,oe)},$$slots:{default:!0}})});var kt=n(xt,2);k(kt,()=>Ue,(a,de)=>{de(a,{children:(ae,je)=>{var oe=wo(),ne=v(oe);k(ne,()=>Ve,(Z,W)=>{W(Z,{children:(X,ce)=>{var M=bo(),K=v(M);k(K,()=>qe,(D,F)=>{F(D,{children:(T,I)=>{j();var x=ve("Configuration Editor");r(T,x)},$$slots:{default:!0}})});var G=n(K,2);k(G,()=>Te,(D,F)=>{F(D,{children:(T,I)=>{var x=V(),P=v(x);{var L=O=>{var B=_o(),ee=n(v(B)),Se=m(ee,!0);g(ee),ye(()=>$e(Se,t(i))),r(O,B)},ie=O=>{var B=ve("Edit sandkasten.yaml");r(O,B)};le(P,O=>{t(i)?O(L):O(ie,!1)})}r(T,x)},$$slots:{default:!0}})}),r(X,M)},$$slots:{default:!0}})});var fe=n(ne,2);k(fe,()=>Ne,(Z,W)=>{W(Z,{class:"space-y-4",children:(X,ce)=>{var M=Po(),K=v(M);{var G=P=>{yr(P,{class:"h-96 w-full"})},D=P=>{Qr(P,{class:"min-h-[500px] font-mono text-sm",placeholder:"# Sandkasten configuration...",spellcheck:"false",get value(){return t(u)},set value(L){c(u,L,!0)}})};le(K,P=>{t(f)?P(G):P(D,!1)})}var F=n(K,2),T=m(F);{let P=$(()=>t(A)||t(f));Ae(T,{onclick:Ge,get disabled(){return t(P)},children:(L,ie)=>{var O=yo(),B=v(O);it(B,{class:"mr-2 h-4 w-4"});var ee=n(B);ye(()=>$e(ee,` ${t(A)?"Saving...":"Save Configuration"}`)),r(L,O)},$$slots:{default:!0}})}var I=n(T,2);Ae(I,{variant:"outline",onclick:ke,get disabled(){return t(f)},children:(P,L)=>{var ie=xo(),O=v(ie);$r(O,{class:"mr-2 h-4 w-4"}),j(),r(P,ie)},$$slots:{default:!0}});var x=n(I,2);{let P=$(()=>t(R)||t(f));Ae(x,{variant:"outline",onclick:se,get disabled(){return t(P)},children:(L,ie)=>{var O=ko(),B=v(O);Ar(B,{class:"mr-2 h-4 w-4"});var ee=n(B);ye(()=>$e(ee,` ${t(R)?"Validating...":"Validate YAML"}`)),r(L,O)},$$slots:{default:!0}})}g(F),r(X,M)},$$slots:{default:!0}})}),r(ae,oe)},$$slots:{default:!0}})});var Ut=n(kt,2);k(Ut,()=>Ur,(a,de)=>{de(a,{get open(){return t(q)},set open(ae){c(q,ae,!0)},children:(ae,je)=>{var oe=V(),ne=v(oe);k(ne,()=>Ue,(fe,Z)=>{Z(fe,{children:(W,X)=>{var ce=Co(),M=v(ce);k(M,()=>Ve,(G,D)=>{D(G,{children:(F,T)=>{var I=$o(),x=m(I),P=m(x);k(P,()=>qe,(O,B)=>{B(O,{children:(ee,Se)=>{j();var Pe=ve("Configuration Reference");r(ee,Pe)},$$slots:{default:!0}})});var L=n(P,2);k(L,()=>Te,(O,B)=>{B(O,{children:(ee,Se)=>{j();var Pe=ve("Available configuration options");r(ee,Pe)},$$slots:{default:!0}})}),g(x);var ie=n(x,2);k(ie,()=>Vr,(O,B)=>{B(O,{children:(ee,Se)=>{j();var Pe=ve();ye(()=>$e(Pe,t(q)?"Hide":"Show")),r(ee,Pe)},$$slots:{default:!0}})}),g(I),r(F,I)},$$slots:{default:!0}})});var K=n(M,2);k(K,()=>qr,(G,D)=>{D(G,{children:(F,T)=>{var I=V(),x=v(I);k(x,()=>Ne,(P,L)=>{L(P,{class:"space-y-4 text-sm",children:(ie,O)=>{var B=Ao();j(30),r(ie,B)},$$slots:{default:!0}})}),r(F,I)},$$slots:{default:!0}})}),r(W,ce)},$$slots:{default:!0}})}),r(ae,oe)},$$slots:{default:!0}})}),g(Je),r(b,Je),Q(),d()}Zt(["change"]);export{Go as component};
