import{i as ot,t as ut,j as l}from"./pRZOK57-.js";var _e="vercel.ai.error",ct=Symbol.for(_e),H,q,f=class Pe extends(q=Error,H=ct,q){constructor({name:t,message:r,cause:a}){super(r),this[H]=!0,this.name=t,this.cause=a}static isInstance(t){return Pe.hasMarker(t,_e)}static hasMarker(t,r){const a=Symbol.for(r);return t!=null&&typeof t=="object"&&a in t&&typeof t[a]=="boolean"&&t[a]===!0}},ke="AI_APICallError",Ee=`vercel.ai.error.${ke}`,lt=Symbol.for(Ee),V,G,y=class extends(G=f,V=lt,G){constructor({message:e,url:t,requestBodyValues:r,statusCode:a,responseHeaders:n,responseBody:s,cause:i,isRetryable:o=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:ke,message:e,cause:i}),this[V]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=n,this.responseBody=s,this.isRetryable=o,this.data=c}static isInstance(e){return f.hasMarker(e,Ee)}},Ae="AI_EmptyResponseBodyError",$e=`vercel.ai.error.${Ae}`,dt=Symbol.for($e),K,W,ft=class extends(W=f,K=dt,W){constructor({message:e="Empty response body"}={}){super({name:Ae,message:e}),this[K]=!0}static isInstance(e){return f.hasMarker(e,$e)}};function Oe(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Ie="AI_InvalidArgumentError",Se=`vercel.ai.error.${Ie}`,pt=Symbol.for(Se),Q,X,Te=class extends(X=f,Q=pt,X){constructor({message:e,cause:t,argument:r}){super({name:Ie,message:e,cause:t}),this[Q]=!0,this.argument=r}static isInstance(e){return f.hasMarker(e,Se)}},Ze="AI_InvalidPromptError",xe=`vercel.ai.error.${Ze}`,mt=Symbol.for(xe),Y,ee,Cr=class extends(ee=f,Y=mt,ee){constructor({prompt:e,message:t,cause:r}){super({name:Ze,message:`Invalid prompt: ${t}`,cause:r}),this[Y]=!0,this.prompt=e}static isInstance(e){return f.hasMarker(e,xe)}},Ne="AI_InvalidResponseDataError",Fe=`vercel.ai.error.${Ne}`,yt=Symbol.for(Fe),te,re,Rr=class extends(re=f,te=yt,re){constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Ne,message:t}),this[te]=!0,this.data=e}static isInstance(e){return f.hasMarker(e,Fe)}},De="AI_JSONParseError",Ce=`vercel.ai.error.${De}`,vt=Symbol.for(Ce),ae,ne,T=class extends(ne=f,ae=vt,ne){constructor({text:e,cause:t}){super({name:De,message:`JSON parsing failed: Text: ${e}.
Error message: ${Oe(t)}`,cause:t}),this[ae]=!0,this.text=e}static isInstance(e){return f.hasMarker(e,Ce)}},Re="AI_LoadAPIKeyError",Le=`vercel.ai.error.${Re}`,ht=Symbol.for(Le),se,ie,I=class extends(ie=f,se=ht,ie){constructor({message:e}){super({name:Re,message:e}),this[se]=!0}static isInstance(e){return f.hasMarker(e,Le)}},je="AI_LoadSettingError",Me=`vercel.ai.error.${je}`,gt=Symbol.for(Me),oe,ue,S=class extends(ue=f,oe=gt,ue){constructor({message:e}){super({name:je,message:e}),this[oe]=!0}static isInstance(e){return f.hasMarker(e,Me)}},Be="AI_TooManyEmbeddingValuesForCallError",ze=`vercel.ai.error.${Be}`,bt=Symbol.for(ze),ce,le,Lr=class extends(le=f,ce=bt,le){constructor(e){super({name:Be,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[ce]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return f.hasMarker(e,ze)}},Ue="AI_TypeValidationError",Je=`vercel.ai.error.${Ue}`,wt=Symbol.for(Je),de,fe,A=class L extends(fe=f,de=wt,fe){constructor({value:t,cause:r,context:a}){let n="Type validation failed";if(a?.field&&(n+=` for ${a.field}`),a?.entityName||a?.entityId){n+=" (";const s=[];a.entityName&&s.push(a.entityName),a.entityId&&s.push(`id: "${a.entityId}"`),n+=s.join(", "),n+=")"}super({name:Ue,message:`${n}: Value: ${JSON.stringify(t)}.
Error message: ${Oe(r)}`,cause:r}),this[de]=!0,this.value=t,this.context=a}static isInstance(t){return f.hasMarker(t,Je)}static wrap({value:t,cause:r,context:a}){var n,s,i;return L.isInstance(r)&&r.value===t&&((n=r.context)==null?void 0:n.field)===a?.field&&((s=r.context)==null?void 0:s.entityName)===a?.entityName&&((i=r.context)==null?void 0:i.entityId)===a?.entityId?r:new L({value:t,cause:r,context:a})}},He="AI_UnsupportedFunctionalityError",qe=`vercel.ai.error.${He}`,_t=Symbol.for(qe),pe,me,jr=class extends(me=f,pe=_t,me){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:He,message:t}),this[pe]=!0,this.functionality=e}static isInstance(e){return f.hasMarker(e,qe)}};class ye extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function F(e){}function Pt(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=F,onError:r=F,onRetry:a=F,onComment:n}=e;let s="",i=!0,o,c="",u="";function v(p){const m=i?p.replace(/^\xEF\xBB\xBF/,""):p,[P,x]=kt(`${s}${m}`);for(const N of P)O(N);s=x,i=!1}function O(p){if(p===""){st();return}if(p.startsWith(":")){n&&n(p.slice(p.startsWith(": ")?2:1));return}const m=p.indexOf(":");if(m!==-1){const P=p.slice(0,m),x=p[m+1]===" "?2:1,N=p.slice(m+x);E(P,N,p);return}E(p,"",p)}function E(p,m,P){switch(p){case"event":u=m;break;case"data":c=`${c}${m}
`;break;case"id":o=m.includes("\0")?void 0:m;break;case"retry":/^\d+$/.test(m)?a(parseInt(m,10)):r(new ye(`Invalid \`retry\` value: "${m}"`,{type:"invalid-retry",value:m,line:P}));break;default:r(new ye(`Unknown field "${p.length>20?`${p.slice(0,20)}â€¦`:p}"`,{type:"unknown-field",field:p,value:m,line:P}));break}}function st(){c.length>0&&t({id:o,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),o=void 0,c="",u=""}function it(p={}){s&&p.consume&&O(s),i=!0,o=void 0,c="",u="",s=""}return{feed:v,reset:it}}function kt(e){const t=[];let r="",a=0;for(;a<e.length;){const n=e.indexOf("\r",a),s=e.indexOf(`
`,a);let i=-1;if(n!==-1&&s!==-1?i=Math.min(n,s):n!==-1?n===e.length-1?i=-1:i=n:s!==-1&&(i=s),i===-1){r=e.slice(a);break}else{const o=e.slice(a,i);t.push(o),a=i+1,e[a-1]==="\r"&&e[a]===`
`&&a++}}return[t,r]}class Et extends TransformStream{constructor({onError:t,onRetry:r,onComment:a}={}){let n;super({start(s){n=Pt({onEvent:i=>{s.enqueue(i)},onError(i){t==="terminate"?s.error(i):typeof t=="function"&&t(i)},onRetry:r,onComment:a})},transform(s){n.feed(s)}})}}var B={};function Mr(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function Br({tools:e=[],providerToolNames:t}){const r={},a={};for(const n of e)if(n.type==="provider"&&n.id in t){const s=t[n.id];r[n.name]=s,a[s]=n.name}return{toProviderToolName:n=>{var s;return(s=r[n])!=null?s:n},toCustomToolName:n=>{var s;return(s=a[n])!=null?s:n}}}async function zr(e,t){return e==null?Promise.resolve():new Promise((r,a)=>{const n=setTimeout(()=>{s(),r()},e),s=()=>{clearTimeout(n)}})}function k(e){return Object.fromEntries([...e.headers])}var{btoa:At,atob:$t}=globalThis;function Ur(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=$t(t);return Uint8Array.from(r,a=>a.codePointAt(0))}function Ot(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return At(t)}function Jr(e){return e instanceof Uint8Array?Ot(e):e}function Hr(e,t={}){const{useArrayBrackets:r=!0}=t,a=new FormData;for(const[n,s]of Object.entries(e))if(s!=null){if(Array.isArray(s)){if(s.length===1){a.append(n,s[0]);continue}const i=r?`${n}[]`:n;for(const o of s)a.append(i,o);continue}a.append(n,s)}return a}var Ve="AI_DownloadError",Ge=`vercel.ai.error.${Ve}`,It=Symbol.for(Ge),ve,he,D=class extends(he=f,ve=It,he){constructor({url:e,statusCode:t,statusText:r,cause:a,message:n=a==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${a}`}){super({name:Ve,message:n,cause:a}),this[ve]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return f.hasMarker(e,Ge)}};async function qr(e){try{const t=await fetch(e);if(!t.ok)throw new D({url:e,statusCode:t.status,statusText:t.statusText});return await t.blob()}catch(t){throw D.isInstance(t)?t:new D({url:e,cause:t})}}var St=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{const n=()=>{const s=r.length,i=new Array(t);for(let o=0;o<t;o++)i[o]=r[Math.random()*s|0];return i.join("")};if(e==null)return n;if(r.includes(a))throw new Te({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return()=>`${e}${a}${n()}`},Vr=St();function $(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var Tt=["fetch failed","failed to fetch"],Zt=["ConnectionRefused","ConnectionClosed","FailedToOpenSocket","ECONNRESET","ECONNREFUSED","ETIMEDOUT","EPIPE"];function xt(e){if(!(e instanceof Error))return!1;const t=e.code;return!!(typeof t=="string"&&Zt.includes(t))}function Ke({error:e,url:t,requestBodyValues:r}){if($(e))return e;if(e instanceof TypeError&&Tt.includes(e.message.toLowerCase())){const a=e.cause;if(a!=null)return new y({message:`Cannot connect to API: ${a.message}`,cause:a,url:t,requestBodyValues:r,isRetryable:!0})}return xt(e)?new y({message:`Cannot connect to API: ${e.message}`,cause:e,url:t,requestBodyValues:r,isRetryable:!0}):e}function We(e=globalThis){var t,r,a;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(a=(r=e.process)==null?void 0:r.versions)!=null&&a.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function Nt(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,a)=>{t[a.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,a]of e)a!=null&&(t[r.toLowerCase()]=a)}return t}function Qe(e,...t){const r=new Headers(Nt(e)),a=r.get("user-agent")||"";return r.set("user-agent",[a,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var Xe="4.0.14",Ft=()=>globalThis.fetch,Gr=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:a,abortSignal:n,fetch:s=Ft()})=>{try{const i=await s(e,{method:"GET",headers:Qe(t,`ai-sdk/provider-utils/${Xe}`,We()),signal:n}),o=k(i);if(!i.ok){let c;try{c=await a({response:i,url:e,requestBodyValues:{}})}catch(u){throw $(u)||y.isInstance(u)?u:new y({message:"Failed to process error response",cause:u,statusCode:i.status,url:e,responseHeaders:o,requestBodyValues:{}})}throw c.value}try{return await r({response:i,url:e,requestBodyValues:{}})}catch(c){throw c instanceof Error&&($(c)||y.isInstance(c))?c:new y({message:"Failed to process successful response",cause:c,statusCode:i.status,url:e,responseHeaders:o,requestBodyValues:{}})}}catch(i){throw Ke({error:i,url:e,requestBodyValues:{}})}};function Kr(e){return e!=null}function Wr({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:a}){if(typeof e=="string")return e;if(e!=null)throw new I({message:`${a} API key must be a string.`});if(typeof process>"u")throw new I({message:`${a} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=B[t],e==null)throw new I({message:`${a} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new I({message:`${a} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function Qr({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=B[t],!(e==null||typeof e!="string")))return e}function Xr({settingValue:e,environmentVariableName:t,settingName:r,description:a}){if(typeof e=="string")return e;if(e!=null)throw new S({message:`${a} setting must be a string.`});if(typeof process>"u")throw new S({message:`${a} setting is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=B[t],e==null)throw new S({message:`${a} setting is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new S({message:`${a} setting must be a string. The value of the ${t} environment variable is not a string.`});return e}function Yr(e){var t;const[r,a=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[a])!=null?t:a}var Dt=/"__proto__"\s*:/,Ct=/"constructor"\s*:/;function ge(e){const t=JSON.parse(e);return t===null||typeof t!="object"||Dt.test(e)===!1&&Ct.test(e)===!1?t:Rt(t)}function Rt(e){let t=[e];for(;t.length;){const r=t;t=[];for(const a of r){if(Object.prototype.hasOwnProperty.call(a,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const n in a){const s=a[n];s&&typeof s=="object"&&t.push(s)}}}return e}function z(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return ge(e)}try{return ge(e)}finally{Error.stackTraceLimit=t}}function U(e){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;const{properties:r}=e;if(r!=null)for(const a of Object.keys(r))r[a]=_(r[a])}e.items!=null&&(e.items=Array.isArray(e.items)?e.items.map(_):_(e.items)),e.anyOf!=null&&(e.anyOf=e.anyOf.map(_)),e.allOf!=null&&(e.allOf=e.allOf.map(_)),e.oneOf!=null&&(e.oneOf=e.oneOf.map(_));const{definitions:t}=e;if(t!=null)for(const r of Object.keys(t))t[r]=_(t[r]);return e}function _(e){return typeof e=="boolean"?e:U(e)}var Lt=Symbol("Let zodToJsonSchema decide on which parser to use"),be={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},jt=e=>typeof e=="string"?{...be,name:e}:{...be,...e};function g(){return{}}function Mt(e,t){var r,a,n;const s={type:"array"};return(r=e.type)!=null&&r._def&&((n=(a=e.type)==null?void 0:a._def)==null?void 0:n.typeName)!==l.ZodAny&&(s.items=d(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(s.minItems=e.minLength.value),e.maxLength&&(s.maxItems=e.maxLength.value),e.exactLength&&(s.minItems=e.exactLength.value,s.maxItems=e.exactLength.value),s}function Bt(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function zt(){return{type:"boolean"}}function Ye(e,t){return d(e.type._def,t)}var Ut=(e,t)=>d(e.innerType._def,t);function et(e,t,r){const a=r??t.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,s)=>et(e,t,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Jt(e)}}var Jt=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function Ht(e,t){return{...d(e.innerType._def,t),default:e.defaultValue()}}function qt(e,t){return t.effectStrategy==="input"?d(e.schema._def,t):g()}function Vt(e){return{type:"string",enum:Array.from(e.values)}}var Gt=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Kt(e,t){const r=[d(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),d(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),a=[];return r.forEach(n=>{if(Gt(n))a.push(...n.allOf);else{let s=n;if("additionalProperties"in n&&n.additionalProperties===!1){const{additionalProperties:i,...o}=n;s=o}a.push(s)}}),a.length?{allOf:a}:void 0}function Wt(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var C=void 0,b={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(C===void 0&&(C=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),C),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function tt(e,t){const r={type:"string"};if(e.checks)for(const a of e.checks)switch(a.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"email":switch(t.emailStrategy){case"format:email":w(r,"email",a.message,t);break;case"format:idn-email":w(r,"idn-email",a.message,t);break;case"pattern:zod":h(r,b.email,a.message,t);break}break;case"url":w(r,"uri",a.message,t);break;case"uuid":w(r,"uuid",a.message,t);break;case"regex":h(r,a.regex,a.message,t);break;case"cuid":h(r,b.cuid,a.message,t);break;case"cuid2":h(r,b.cuid2,a.message,t);break;case"startsWith":h(r,RegExp(`^${R(a.value,t)}`),a.message,t);break;case"endsWith":h(r,RegExp(`${R(a.value,t)}$`),a.message,t);break;case"datetime":w(r,"date-time",a.message,t);break;case"date":w(r,"date",a.message,t);break;case"time":w(r,"time",a.message,t);break;case"duration":w(r,"duration",a.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"includes":{h(r,RegExp(R(a.value,t)),a.message,t);break}case"ip":{a.version!=="v6"&&w(r,"ipv4",a.message,t),a.version!=="v4"&&w(r,"ipv6",a.message,t);break}case"base64url":h(r,b.base64url,a.message,t);break;case"jwt":h(r,b.jwt,a.message,t);break;case"cidr":{a.version!=="v6"&&h(r,b.ipv4Cidr,a.message,t),a.version!=="v4"&&h(r,b.ipv6Cidr,a.message,t);break}case"emoji":h(r,b.emoji(),a.message,t);break;case"ulid":{h(r,b.ulid,a.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{w(r,"binary",a.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{h(r,b.base64,a.message,t);break}}break}case"nanoid":h(r,b.nanoid,a.message,t)}return r}function R(e,t){return t.patternStrategy==="escape"?Xt(e):e}var Qt=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Xt(e){let t="";for(let r=0;r<e.length;r++)Qt.has(e[r])||(t+="\\"),t+=e[r];return t}function w(e,t,r,a){var n;e.format||(n=e.anyOf)!=null&&n.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function h(e,t,r,a){var n;e.pattern||(n=e.allOf)!=null&&n.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:we(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=we(t,a)}function we(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const a={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=a.i?e.source.toLowerCase():e.source;let s="",i=!1,o=!1,c=!1;for(let u=0;u<n.length;u++){if(i){s+=n[u],i=!1;continue}if(a.i){if(o){if(n[u].match(/[a-z]/)){c?(s+=n[u],s+=`${n[u-2]}-${n[u]}`.toUpperCase(),c=!1):n[u+1]==="-"&&((r=n[u+2])!=null&&r.match(/[a-z]/))?(s+=n[u],c=!0):s+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){s+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(a.m){if(n[u]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){s+=`($|(?=[\r
]))`;continue}}if(a.s&&n[u]==="."){s+=o?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}s+=n[u],n[u]==="\\"?i=!0:o&&n[u]==="]"?o=!1:!o&&n[u]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function rt(e,t){var r,a,n,s,i,o;const c={type:"object",additionalProperties:(r=d(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((a=e.keyType)==null?void 0:a._def.typeName)===l.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){const{type:u,...v}=tt(e.keyType._def,t);return{...c,propertyNames:v}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===l.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===l.ZodBranded&&e.keyType._def.type._def.typeName===l.ZodString&&((o=e.keyType._def.type._def.checks)!=null&&o.length)){const{type:u,...v}=Ye(e.keyType._def,t);return{...c,propertyNames:v}}}return c}function Yt(e,t){if(t.mapStrategy==="record")return rt(e,t);const r=d(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||g(),a=d(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||g();return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}function er(e){const t=e.values,a=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),n=Array.from(new Set(a.map(s=>typeof s)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:a}}function tr(){return{not:g()}}function rr(){return{type:"null"}}var j={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ar(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(a=>a._def.typeName in j&&(!a._def.checks||!a._def.checks.length))){const a=r.reduce((n,s)=>{const i=j[s._def.typeName];return i&&!n.includes(i)?[...n,i]:n},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){const a=r.reduce((n,s)=>{const i=typeof s._def.value;switch(i){case"string":case"number":case"boolean":return[...n,i];case"bigint":return[...n,"integer"];case"object":if(s._def.value===null)return[...n,"null"];default:return n}},[]);if(a.length===r.length){const n=a.filter((s,i,o)=>o.indexOf(s)===i);return{type:n.length>1?n:n[0],enum:r.reduce((s,i)=>s.includes(i._def.value)?s:[...s,i._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,n)=>[...a,...n._def.values.filter(s=>!a.includes(s))],[])};return nr(e,t)}var nr=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((a,n)=>d(a._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(a=>!!a&&(!t.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0};function sr(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[j[e.innerType._def.typeName],"null"]};const r=d(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function ir(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function or(e,t){const r={type:"object",properties:{}},a=[],n=e.shape();for(const i in n){let o=n[i];if(o===void 0||o._def===void 0)continue;const c=cr(o),u=d(o._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});u!==void 0&&(r.properties[i]=u,c||a.push(i))}a.length&&(r.required=a);const s=ur(e,t);return s!==void 0&&(r.additionalProperties=s),r}function ur(e,t){if(e.catchall._def.typeName!=="ZodNever")return d(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function cr(e){try{return e.isOptional()}catch{return!0}}var lr=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return d(e.innerType._def,t);const a=d(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return a?{anyOf:[{not:g()},a]}:g()},dr=(e,t)=>{if(t.pipeStrategy==="input")return d(e.in._def,t);if(t.pipeStrategy==="output")return d(e.out._def,t);const r=d(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=d(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(n=>n!==void 0)}};function fr(e,t){return d(e.type._def,t)}function pr(e,t){const a={type:"array",uniqueItems:!0,items:d(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(a.minItems=e.minSize.value),e.maxSize&&(a.maxItems=e.maxSize.value),a}function mr(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,a)=>d(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:d(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,a)=>d(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}function yr(){return{not:g()}}function vr(){return g()}var hr=(e,t)=>d(e.innerType._def,t),gr=(e,t,r)=>{switch(t){case l.ZodString:return tt(e,r);case l.ZodNumber:return ir(e);case l.ZodObject:return or(e,r);case l.ZodBigInt:return Bt(e);case l.ZodBoolean:return zt();case l.ZodDate:return et(e,r);case l.ZodUndefined:return yr();case l.ZodNull:return rr();case l.ZodArray:return Mt(e,r);case l.ZodUnion:case l.ZodDiscriminatedUnion:return ar(e,r);case l.ZodIntersection:return Kt(e,r);case l.ZodTuple:return mr(e,r);case l.ZodRecord:return rt(e,r);case l.ZodLiteral:return Wt(e);case l.ZodEnum:return Vt(e);case l.ZodNativeEnum:return er(e);case l.ZodNullable:return sr(e,r);case l.ZodOptional:return lr(e,r);case l.ZodMap:return Yt(e,r);case l.ZodSet:return pr(e,r);case l.ZodLazy:return()=>e.getter()._def;case l.ZodPromise:return fr(e,r);case l.ZodNaN:case l.ZodNever:return tr();case l.ZodEffects:return qt(e,r);case l.ZodAny:return g();case l.ZodUnknown:return vr();case l.ZodDefault:return Ht(e,r);case l.ZodBranded:return Ye(e,r);case l.ZodReadonly:return hr(e,r);case l.ZodCatch:return Ut(e,r);case l.ZodPipeline:return dr(e,r);case l.ZodFunction:case l.ZodVoid:case l.ZodSymbol:return;default:return(a=>{})()}},br=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function d(e,t,r=!1){var a;const n=t.seen.get(e);if(t.override){const c=(a=t.override)==null?void 0:a.call(t,e,t,n,r);if(c!==Lt)return c}if(n&&!r){const c=wr(n,t);if(c!==void 0)return c}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=gr(e,e.typeName,t),o=typeof i=="function"?d(i(),t):i;if(o&&_r(e,t,o),t.postProcess){const c=t.postProcess(o,e,t);return s.jsonSchema=o,c}return s.jsonSchema=o,o}var wr=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:br(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,a)=>t.currentPath[a]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),g()):t.$refStrategy==="seen"?g():void 0}},_r=(e,t,r)=>(e.description&&(r.description=e.description),r),Pr=e=>{const t=jt(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([a,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,a],jsonSchema:void 0}]))}},kr=(e,t)=>{var r;const a=Pr(t);let n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[v,O])=>{var E;return{...u,[v]:(E=d(O._def,{...a,currentPath:[...a.basePath,a.definitionPath,v]},!0))!=null?E:g()}},{}):void 0;const s=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=(r=d(e._def,s===void 0?a:{...a,currentPath:[...a.basePath,a.definitionPath,s]},!1))!=null?r:g(),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const c=s===void 0?n?{...i,[a.definitionPath]:n}:i:{$ref:[...a.$refStrategy==="relative"?[]:a.basePath,a.definitionPath,s].join("/"),[a.definitionPath]:{...n,[s]:i}};return c.$schema="http://json-schema.org/draft-07/schema#",c},M=Symbol.for("vercel.ai.schema");function ea(e){let t;return()=>(t==null&&(t=e()),t)}function Z(e,{validate:t}={}){return{[M]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Er(e){return typeof e=="object"&&e!==null&&M in e&&e[M]===!0&&"jsonSchema"in e&&"validate"in e}function Ar(e){return e==null?Z({properties:{},additionalProperties:!1}):Er(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?Tr(e):$r(e):e()}function $r(e){return Z(()=>U(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{const r=await e["~standard"].validate(t);return"value"in r?{success:!0,value:r.value}:{success:!1,error:new A({value:t,cause:r.issues})}}})}function Or(e,t){var r;const a=(r=void 0)!=null?r:!1;return Z(()=>kr(e,{$refStrategy:a?"root":"none"}),{validate:async n=>{const s=await e.safeParseAsync(n);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Ir(e,t){var r;const a=(r=void 0)!=null?r:!1;return Z(()=>U(ut(e,{target:"draft-7",io:"input",reused:a?"ref":"inline"})),{validate:async n=>{const s=await ot(e,n);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Sr(e){return"_zod"in e}function Tr(e,t){return Sr(e)?Ir(e):Or(e)}async function Zr({value:e,schema:t,context:r}){const a=await J({value:e,schema:t,context:r});if(!a.success)throw A.wrap({value:e,cause:a.error,context:r});return a.value}async function J({value:e,schema:t,context:r}){const a=Ar(t);try{if(a.validate==null)return{success:!0,value:e,rawValue:e};const n=await a.validate(e);return n.success?{success:!0,value:n.value,rawValue:e}:{success:!1,error:A.wrap({value:e,cause:n.error,context:r}),rawValue:e}}catch(n){return{success:!1,error:A.wrap({value:e,cause:n,context:r}),rawValue:e}}}async function xr({text:e,schema:t}){try{const r=z(e);return t==null?r:Zr({value:r,schema:t})}catch(r){throw T.isInstance(r)||A.isInstance(r)?r:new T({text:e,cause:r})}}async function at({text:e,schema:t}){try{const r=z(e);return t==null?{success:!0,value:r,rawValue:r}:await J({value:r,schema:t})}catch(r){return{success:!1,error:T.isInstance(r)?r:new T({text:e,cause:r}),rawValue:void 0}}}function ta(e){try{return z(e),!0}catch{return!1}}function Nr({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Et).pipeThrough(new TransformStream({async transform({data:r},a){r!=="[DONE]"&&a.enqueue(await at({text:r,schema:t}))}}))}async function ra({provider:e,providerOptions:t,schema:r}){if(t?.[e]==null)return;const a=await J({value:t[e],schema:r});if(!a.success)throw new Te({argument:"providerOptions",message:`invalid ${e} provider options`,cause:a.error});return a.value}var Fr=()=>globalThis.fetch,aa=async({url:e,headers:t,body:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i})=>nt({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i}),na=async({url:e,headers:t,formData:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i})=>nt({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i}),nt=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:n,abortSignal:s,fetch:i=Fr()})=>{try{const o=await i(e,{method:"POST",headers:Qe(t,`ai-sdk/provider-utils/${Xe}`,We()),body:r.content,signal:s}),c=k(o);if(!o.ok){let u;try{u=await n({response:o,url:e,requestBodyValues:r.values})}catch(v){throw $(v)||y.isInstance(v)?v:new y({message:"Failed to process error response",cause:v,statusCode:o.status,url:e,responseHeaders:c,requestBodyValues:r.values})}throw u.value}try{return await a({response:o,url:e,requestBodyValues:r.values})}catch(u){throw u instanceof Error&&($(u)||y.isInstance(u))?u:new y({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:c,requestBodyValues:r.values})}}catch(o){throw Ke({error:o,url:e,requestBodyValues:r.values})}};function sa({id:e,inputSchema:t}){return({execute:r,outputSchema:a,needsApproval:n,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:c,...u})=>({type:"provider",id:e,args:u,inputSchema:t,outputSchema:a,execute:r,needsApproval:n,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:c})}function ia({id:e,inputSchema:t,outputSchema:r,supportsDeferredResults:a}){return({execute:n,needsApproval:s,toModelOutput:i,onInputStart:o,onInputDelta:c,onInputAvailable:u,...v})=>({type:"provider",id:e,args:v,inputSchema:t,outputSchema:r,execute:n,needsApproval:s,toModelOutput:i,onInputStart:o,onInputDelta:c,onInputAvailable:u,supportsDeferredResults:a})}async function oa(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var ua=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:n,requestBodyValues:s})=>{const i=await a.text(),o=k(a);if(i.trim()==="")return{responseHeaders:o,value:new y({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:r?.(a)})};try{const c=await xr({text:i,schema:e});return{responseHeaders:o,value:new y({message:t(c),url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,data:c,isRetryable:r?.(a,c)})}}catch{return{responseHeaders:o,value:new y({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:r?.(a)})}}},ca=e=>async({response:t})=>{const r=k(t);if(t.body==null)throw new ft({});return{responseHeaders:r,value:Nr({stream:t.body,schema:e})}},la=e=>async({response:t,url:r,requestBodyValues:a})=>{const n=await t.text(),s=await at({text:n,schema:e}),i=k(t);if(!s.success)throw new y({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:n,url:r,requestBodyValues:a});return{responseHeaders:i,value:s.value,rawValue:s.rawValue}},da=()=>async({response:e,url:t,requestBodyValues:r})=>{const a=k(e);if(!e.body)throw new y({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:a,responseBody:void 0});try{const n=await e.arrayBuffer();return{responseHeaders:a,value:new Uint8Array(n)}}catch(n){throw new y({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:a,responseBody:void 0,cause:n})}};function fa(e){return e?.replace(/\/$/,"")}export{f as A,Cr as B,Br as C,y as D,da as E,Zr as F,Kr as G,Nt as H,Rr as I,Xr as J,We as K,Lr as T,jr as U,aa as a,sa as b,Mr as c,ia as d,Qe as e,la as f,Vr as g,Ot as h,zr as i,Gr as j,ca as k,Wr as l,Jr as m,ea as n,ua as o,ra as p,Qr as q,oa as r,ta as s,na as t,Hr as u,Ur as v,fa as w,qr as x,Yr as y,Tr as z};
