import{e as h,o as c}from"./DFhzKIwN.js";import{R as w,S as a,T as m,u as p,b,d as x}from"./C9Or7OaE.js";const y=typeof window<"u"?window:void 0;function v(n){let t=n.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}class E{#e;#t;constructor(t={}){const{window:e=y,document:i=e?.document}=t;e!==void 0&&(this.#e=i,this.#t=h(s=>{const o=c(e,"focusin",s),r=c(e,"focusout",s);return()=>{o(),r()}}))}get current(){return this.#t?.(),this.#e?v(this.#e):null}}new E;class S{#e;#t;constructor(t){this.#e=t,this.#t=Symbol(t)}get key(){return this.#t}exists(){return w(this.#t)}get(){const t=a(this.#t);if(t===void 0)throw new Error(`Context "${this.#e}" not found`);return t}getOr(t){const e=a(this.#t);return e===void 0?t:e}set(t){return m(this.#t,t)}}function g(n,t){switch(n){case"post":b(t);break;case"pre":p(t);break}}function f(n,t,e,i={}){const{lazy:s=!1}=i;let o=!s,r=Array.isArray(n)?[]:void 0;g(t,()=>{const u=Array.isArray(n)?n.map(l=>l()):n();if(!o){o=!0,r=u;return}const d=x(()=>e(u,r));return r=u,d})}function k(n,t,e){f(n,"post",t,e)}function A(n,t,e){f(n,"pre",t,e)}k.pre=A;export{S as C,y as d,k as w};
